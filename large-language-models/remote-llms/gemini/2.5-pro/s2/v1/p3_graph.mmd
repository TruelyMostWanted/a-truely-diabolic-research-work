graph TD
    %% ===================================================================
    %% 1. Style Definitions
    %% ===================================================================
    classDef entityStyle fill:#87CEEB,stroke:#333,stroke-width:2px,color:#000
    classDef attributeStyle fill:#fff,stroke:#333,stroke-width:1px,color:#000
    classDef relationStyle fill:#FFA500,stroke:#333,stroke-width:2px,color:#000
    classDef goalStyle fill:#90EE90,stroke:#333,stroke-width:2px,color:#000
    classDef conditionStyle fill:#F08080,stroke:#333,stroke-width:2px,color:#000
    classDef dvStyle fill:#DDA0DD,stroke:#333,stroke-width:2px,color:#000

    %% ===================================================================
    %% 2. Entities and Their Attributes
    %% ===================================================================
    subgraph Core Domain Model
        direction LR

        %% E0: Project
        E0["(E0) Project"]:::entityStyle
        E0_A0("id"):::attributeStyle; E0_A1("name"):::attributeStyle; E0_A2("project_start"):::attributeStyle; E0_A3("project_end"):::attributeStyle; E0_A4("description"):::attributeStyle; E0_A5("budget"):::attributeStyle; E0_A6("status"):::attributeStyle; E0_A7("priority"):::attributeStyle
        E0 --- E0_A0 & E0_A1 & E0_A2 & E0_A3 & E0_A4 & E0_A5 & E0_A6 & E0_A7

        %% E1: Team
        E1["(E1) Team"]:::entityStyle
        E1_A0("id"):::attributeStyle; E1_A1("name"):::attributeStyle; E1_A2("team_size"):::attributeStyle; E1_A3("team_start"):::attributeStyle; E1_A4("team_status"):::attributeStyle
        E1 --- E1_A0 & E1_A1 & E1_A2 & E1_A3 & E1_A4

        %% E2: Worker
        E2["(E2) Worker"]:::entityStyle
        E2_A0("id"):::attributeStyle; E2_A1("name"):::attributeStyle; E2_A2("email"):::attributeStyle; E2_A3("start_date"):::attributeStyle; E2_A4("status"):::attributeStyle; E2_A5("availability"):::attributeStyle
        E2 --- E2_A0 & E2_A1 & E2_A2 & E2_A3 & E2_A4 & E2_A5

        %% E3: Feature
        E3["(E3) Feature"]:::entityStyle
        E3_A0("id"):::attributeStyle; E3_A1("title"):::attributeStyle; E3_A2("description"):::attributeStyle; E3_A3("status"):::attributeStyle; E3_A4("priority"):::attributeStyle; E3_A5("estimated_effort"):::attributeStyle
        E3 --- E3_A0 & E3_A1 & E3_A2 & E3_A3 & E3_A4 & E3_A5

        %% E4: Skill
        E4["(E4) Skill"]:::entityStyle
        E4_A0("id"):::attributeStyle; E4_A1("label"):::attributeStyle; E4_A2("description"):::attributeStyle; E4_A3("level"):::attributeStyle
        E4 --- E4_A0 & E4_A1 & E4_A2 & E4_A3

        %% E5: Role
        E5["(E5) Role"]:::entityStyle
        E5_A0("id"):::attributeStyle; E5_A1("role_name"):::attributeStyle; E5_A2("description"):::attributeStyle
        E5 --- E5_A0 & E5_A1 & E5_A2

        %% E6: ProductOwner
        E6["(E6) ProductOwner"]:::entityStyle

        %% E7: ScrumMaster
        E7["(E7) ScrumMaster"]:::entityStyle

        %% E8: ProductBacklog
        E8["(E8) ProductBacklog"]:::entityStyle

        %% E9: Sprint
        E9["(E9) Sprint"]:::entityStyle
        E9_A0("id"):::attributeStyle; E9_A1("sprint_number"):::attributeStyle; E9_A2("start_date"):::attributeStyle; E9_A3("end_date"):::attributeStyle; E9_A4("status"):::attributeStyle
        E9 --- E9_A0 & E9_A1 & E9_A2 & E9_A3 & E9_A4

        %% E12: SprintReview
        E12["(E12) SprintReview"]:::entityStyle

        %% E13: SprintRetrospective
        E13["(E13) SprintRetrospective"]:::entityStyle
        E13_A3("team_satisfaction"):::attributeStyle
        E13 --- E13_A3

        %% E14: SprintBacklog
        E14["(E14) SprintBacklog"]:::entityStyle

        %% E15: SprintGoal
        E15["(E15) SprintGoal"]:::entityStyle
        E15_A2("achievement_status"):::attributeStyle
        E15 --- E15_A2
        
        %% E16: Epic
        E16["(E16) Epic"]:::entityStyle
        E16_A2("description"):::attributeStyle; E16_A3("priority"):::attributeStyle
        E16 --- E16_A2 & E16_A3

        %% E17: UserStory
        E17["(E17) UserStory"]:::entityStyle
        E17_A3("acceptance_criteria"):::attributeStyle; E17_A5("story_points"):::attributeStyle
        E17 --- E17_A3 & E17_A5

        %% E18: Task
        E18["(E18) Task"]:::entityStyle
        E18_A3("status"):::attributeStyle; E18_A4("effort"):::attributeStyle
        E18 --- E18_A3 & E18_A4

        %% E19: DevelopmentSnapshot
        E19["(E19) DevelopmentSnapshot"]:::entityStyle

        %% E20: Blocker
        E20["(E20) Blocker"]:::entityStyle
        E20_A3("severity"):::attributeStyle; E20_A5("detected_on"):::attributeStyle; E20_A6("resolved_on"):::attributeStyle
        E20 --- E20_A3 & E20_A5 & E20_A6

        %% E21: Stakeholder
        E21["(E21) Stakeholder"]:::entityStyle
        E21_A6("influence_level"):::attributeStyle
        E21 --- E21_A6

        %% E22: Velocity
        E22["(E22) Velocity"]:::entityStyle
        E22_A2("avg._story_points"):::attributeStyle
        E22 --- E22_A2

        %% E23: ReleasePlan
        E23["(E23) ReleasePlan"]:::entityStyle

        %% E24: Roadmap
        E24["(E24) Roadmap"]:::entityStyle
    end

    %% ===================================================================
    %% 3. Relationships between Entities
    %% ===================================================================
    subgraph Relationships
        direction TB
        R1["(R1) is_assigned_to"]:::relationStyle; E1 --> R1 --> E0
        R2["(R2) belongs_to"]:::relationStyle;     E2 --> R2 --> E1
        R3["(R3) has"]:::relationStyle;            E2 --> R3 --> E4
        R4["(R4) takes_on"]:::relationStyle;      E2 --> R4 --> E5
        R5["(R5) manages"]:::relationStyle;       E6 --> R5 --> E8
        R6["(R6) is_supported_by"]:::relationStyle; E1 --> R6 --> E7
        R7["(R7) contains"]:::relationStyle;       E8 --> R7 --> E3
        R8["(R8) contains"]:::relationStyle;       E8 --> R8 --> E16
        R9["(R9) contains"]:::relationStyle;       E16 --> R9 --> E17
        R10["(R10) consists_of"]:::relationStyle;   E17 --> R10 --> E18
        R11["(R11) is_in"]:::relationStyle;         E17 --> R11 --> E14
        R12["(R12) belongs_to"]:::relationStyle;   E14 --> R12 --> E9
        R13["(R13) pursues"]:::relationStyle;      E9 --> R13 --> E15
        R16["(R16) is_blocked_by"]:::relationStyle; E18 --> R16 --> E20
        R17["(R17) participates_in"]:::relationStyle; E21 --> R17 --> E12
        R18["(R18) moderates"]:::relationStyle;     E7 --> R18 --> E13
        R19["(R19) refers_to"]:::relationStyle;     E22 --> R19 --> E1
        R20["(R20) plans"]:::relationStyle;         E23 --> R20 --> E3
        R21["(R21) is_part_of"]:::relationStyle;   E23 --> R21 --> E24
        R22["(R22) generates"]:::relationStyle;     E9 --> R22 --> E19
    end

    %% ===================================================================
    %% 4. Optimization Model Layer (Goals, Conditions, DVs)
    %% ===================================================================
    subgraph Optimization Layer
        direction BT
        
        %% Goal Nodes
        G0["(G0) maximize_feature_value"]:::goalStyle
        G1["(G1) maximize_story_points"]:::goalStyle
        G2["(G2) minimize_total_effort"]:::goalStyle
        G3["(G3) maximize_team_velocity"]:::goalStyle
        G4["(G4) minimize_blocker_time"]:::goalStyle
        G5["(G5) maximize_stakeholder_sat."]:::goalStyle
        G6["(G6) maximize_goal_achievement"]:::goalStyle
        G7["(G7) minimize_project_duration"]:::goalStyle
        G8["(G8) maximize_team_satisfaction"]:::goalStyle
        G9["(G9) minimize_budget_consumption"]:::goalStyle
        G10["(G10) maximize_task_completion"]:::goalStyle
        G11["(G11) maximize_epic_priority"]:::goalStyle

        %% Condition Nodes
        C0["(C0) enforce_team_size"]:::conditionStyle
        C1["(C1) respect_worker_avail."]:::conditionStyle
        C2["(C2) stay_in_sprint_capacity"]:::conditionStyle
        C3["(C3) project_in_budget"]:::conditionStyle
        C4["(C4) us_requires_criteria"]:::conditionStyle
        C5["(C5) task_status_valid"]:::conditionStyle
        C6["(C6) sprint_has_goal"]:::conditionStyle
        C7["(C7) feature_requires_prio"]:::conditionStyle
        C8["(C8) avoid_high_sev_blockers"]:::conditionStyle
        C9["(C9) sprint_duration_fixed"]:::conditionStyle
        C10["(C10) skill_level_adequate"]:::conditionStyle
        C11["(C11) epic_must_be_detailed"]:::conditionStyle

        %% Decision Variable Nodes
        DV0["(DV0) assign_story_to_sprint"]:::dvStyle
        DV1["(DV1) assign_worker_to_task"]:::dvStyle
        DV2["(DV2) select_feature_for_release"]:::dvStyle
        DV3["(DV3) set_user_story_priority"]:::dvStyle
        DV4["(DV4) estimate_story_points"]:::dvStyle
        DV5["(DV5) adjust_team_size"]:::dvStyle
        DV6["(DV6) set_project_budget"]:::dvStyle
        DV10["(DV10) assign_team_to_project"]:::dvStyle
    end

    %% ===================================================================
    %% 5. Connections from Optimization Layer to Core Model
    %% ===================================================================
    %% Goal Connections
    G0 -.-> E3_A4
    G1 -.-> E17_A5
    G2 -.-> E3_A5
    G3 -.-> E22_A2
    G4 -.-> E20_A5 & E20_A6
    G5 -.-> E21_A6
    G6 -.-> E15_A2
    G7 -.-> E0_A3
    G8 -.-> E13_A3
    G9 -.-> E0_A5
    G10 -.-> E18_A3
    G11 -.-> E16_A3

    %% Condition Connections
    C0 -.-> E1_A2
    C1 -.-> E2_A5
    C2 -.-> E17_A5
    C3 -.-> E0_A5
    C4 -.-> E17_A3
    C5 -.-> E18_A3
    C6 -.-> E9
    C7 -.-> E3_A4
    C8 -.-> E20_A3
    C9 -.-> E9_A3
    C10 -.-> E4_A3
    C11 -.-> E16_A2
    
    %% Decision Variable Connections
    DV0 -.-> E17 & E9
    DV1 -.-> E2 & E18
    DV2 -.-> E3 & E23
    DV3 -.-> E17
    DV4 -.-> E17
    DV5 -.-> E1
    DV6 -.-> E0
    DV10 -.-> E1 & E0