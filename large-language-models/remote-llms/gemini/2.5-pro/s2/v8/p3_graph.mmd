%% Mermaid.js Graph for SCRUM Optimization Model
graph TD

    %% --- 1. STYLE DEFINITIONS ---
    classDef entity fill:#D6EAF8,stroke:#3498DB,stroke-width:2px;
    classDef attribute fill:#FFFFFF,stroke:#333,stroke-width:1px;
    classDef relation fill:#FAE5D3,stroke:#E67E22,stroke-width:2px,color:#333;
    classDef goal fill:#D5F5E3,stroke:#2ECC71,stroke-width:2px,color:#333;
    classDef condition fill:#FADBD8,stroke:#E74C3C,stroke-width:2px,color:#333;
    classDef dv fill:#E8DAEF,stroke:#8E44AD,stroke-width:2px,color:#333;

    %% --- 2. NODE DECLARATIONS ---

    %% Entities (from Entities.csv)
    subgraph "Entities"
        E0("Project"); E1("Team"); E2("Worker"); E3("Feature"); E4("Skill"); E5("Role"); E6("ProductOwner"); E7("ScrumMaster"); E8("ProductBacklog"); E9("Sprint"); E12("SprintReview"); E13("SprintRetrospective"); E14("SprintBacklog"); E15("SprintGoal"); E16("Epic"); E17("UserStory"); E18("Task"); E20("Blocker"); E21("Stakeholder"); E22("Velocity"); E23("ReleasePlan"); E26("FeatureDocumentation");
    end

    %% Relations (from Relationships.csv)
    subgraph "Relationships"
        R1("is_assigned_to_project"); R2("belongs_to_team"); R3("has_skill"); R4("takes_on_role"); R5("manages_backlog"); R6("is_supported_by"); R7("contains_feature"); R8("contains_epic"); R9("contains_user_story"); R10("consists_of_tasks"); R11("is_in_sprint_backlog"); R12("belongs_to_sprint"); R13("pursues_goal"); R15("documents_feature"); R16("is_blocked_by"); R17("participates_in"); R18("moderates_retrospective"); R19("refers_to_team"); R20("plans_release");
    end

    %% Goals (from Goals.csv)
    subgraph "Goals (Objectives)"
        G0("G0: maximize_feature_priority"); G1("G1: minimize_project_budget"); G2("G2: maximize_story_points_per_sprint"); G3("G3: minimize_task_effort"); G4("G4: maximize_team_velocity"); G5("G5: minimize_blocker_severity"); G6("G6: maximize_stakeholder_influence"); G7("G7: minimize_project_duration"); G9("G9: maximize_sprint_goal_achievement"); G10("G10: minimize_unresolved_blockers"); G11("G11: maximize_features_in_release");
    end

    %% Conditions (from Conditions.csv)
    subgraph "Conditions (Constraints)"
        C0("C0: constrain_team_size_max"); C1("C1: constrain_team_size_min"); C2("C2: constrain_project_budget"); C3("C3: require_active_worker"); C4("C4: sprint_story_points_le_velocity"); C5("C5: require_acceptance_criteria"); C6("C6: prefer_high_priority_features"); C7("C7: avoid_low_priority_stories"); C8("C8: require_certified_skills"); C9("C9: require_feature_documentation"); C10("C10: task_must_not_be_blocked"); C11("C11: sprint_must_be_active"); C12("C12: limit_sprint_backlog_effort");
    end

    %% Decision Variables (from DecisionVariables.csv)
    subgraph "Decision Variables"
        DV0("DV0: assign_worker_to_task"); DV1("DV1: select_user_story_for_sprint"); DV2("DV2: set_feature_priority"); DV3("DV3: adjust_team_size"); DV4("DV4: allocate_effort_to_task"); DV5("DV5: set_sprint_duration"); DV6("DV6: set_story_points_for_user_story"); DV8("DV8: choose_blocker_severity"); DV9("DV9: approve_project_budget"); DV10("DV10: select_feature_for_release");
    end
    
    %% --- 3. APPLYING STYLES ---
    class E0,E1,E2,E3,E4,E5,E6,E7,E8,E9,E12,E13,E14,E15,E16,E17,E18,E20,E21,E22,E23,E26 entity;
    class R1,R2,R3,R4,R5,R6,R7,R8,R9,R10,R11,R12,R13,R15,R16,R17,R18,R19,R20 relation;
    class G0,G1,G2,G3,G4,G5,G6,G7,G9,G10,G11 goal;
    class C0,C1,C2,C3,C4,C5,C6,C7,C8,C9,C10,C11,C12 condition;
    class DV0,DV1,DV2,DV3,DV4,DV5,DV6,DV8,DV9,DV10 dv;
    
    %% --- 4. CONNECTIONS ---

    %% Entity Relationships
    E1 -- "1..N" --- R1 -- "1" --- E0;
    E2 -- "N" --- R2 -- "1" --- E1;
    E2 -- "N" --- R3 -- "M" --- E4;
    E2 -- "N" --- R4 -- "M" --- E5;
    E6 -- "1" --- R5 -- "1" --- E8;
    E1 -- "1" --- R6 -- "1" --- E7;
    E8 -- "1" --- R7 -- "N" --- E3;
    E8 -- "1" --- R8 -- "N" --- E16;
    E16 -- "1" --- R9 -- "N" --- E17;
    E17 -- "1" --- R10 -- "N" --- E18;
    E17 -- "N" --- R11 -- "M" --- E14;
    E14 -- "1" --- R12 -- "1" --- E9;
    E9 -- "1" --- R13 -- "1" --- E15;
    E26 -- "1" --- R15 -- "1" --- E3;
    E18 -- "N" --- R16 -- "M" --- E20;
    E21 -- "N" --- R17 -- "M" --- E12;
    E7 -- "1" --- R18 -- "N" --- E13;
    E22 -- "1" --- R19 -- "1" --- E1;
    E23 -- "1" --- R20 -- "N" --- E3;

    %% Connections for Project (E0)
    subgraph Project_Connections
        E0_budget("budget"); E0_end("project_end");
        G1 --> E0_budget; E0 --- E0_budget;
        G7 --> E0_end; E0 --- E0_end;
        C2 --> E0_budget;
        DV9 --> E0;
    end
    
    %% Connections for Team (E1) and Velocity (E22)
    subgraph Team_Connections
        E1_size("team_size"); E22_avg_sp("avg_story_points");
        C0 --> E1_size; E1 --- E1_size;
        C1 --> E1_size;
        G4 --> E22_avg_sp; E22 --- E22_avg_sp;
        C4 -.-> E22_avg_sp;
        DV3 --> E1;
    end
    
    %% Connections for Worker (E2) and Skill (E4)
    subgraph Worker_Connections
        E2_status("status"); E4_certified("certified");
        C3 --> E2_status; E2 --- E2_status;
        C8 --> E4_certified; E4 --- E4_certified;
    end

    %% Connections for Feature (E3) and ReleasePlan (E23)
    subgraph Feature_Connections
        E3_priority_G0("priority"); E3_priority_C6("priority"); E26_created("creation_date");
        G0 --> E3_priority_G0; E3 --- E3_priority_G0;
        C6 --> E3_priority_C6; E3 --- E3_priority_C6;
        G11 --> E23;
        C9 --> E26_created; E26 --- E26_created;
        DV2 --> E3;
        DV10 --> E23;
    end

    %% Connections for UserStory (E17)
    subgraph UserStory_Connections
        E17_sp("story_points"); E17_ac("acceptance_criteria"); E17_priority("priority");
        G2 --> E17_sp; E17 --- E17_sp;
        C4 --> E17_sp;
        C5 --> E17_ac; E17 --- E17_ac;
        C7 --> E17_priority; E17 --- E17_priority;
        DV1 --> E17;
        DV6 --> E17;
    end

    %% Connections for Task (E18)
    subgraph Task_Connections
        E18_effort("effort"); E18_status("status");
        G3 --> E18_effort; E18 --- E18_effort;
        C10 --> E18_status; E18 --- E18_status;
        DV0 --> E2; DV0 --> E18;
        DV4 --> E18;
    end

    %% Connections for Blocker (E20)
    subgraph Blocker_Connections
        E20_severity("severity"); E20_status("status");
        G5 --> E20_severity; E20 --- E20_severity;
        G10 --> E20_status; E20 --- E20_status;
        DV8 --> E20;
    end

    %% Connections for Sprint (E9), SprintGoal (E15), and SprintBacklog (E14)
    subgraph Sprint_Connections
        E9_status("status"); E15_achieved("achievement_status"); E14_effort("total_effort");
        G9 --> E15_achieved; E15 --- E15_achieved;
        C11 --> E9_status; E9 --- E9_status;
        C12 --> E14_effort; E14 --- E14_effort;
        DV5 --> E9;
    end

    %% Connections for Stakeholder (E21)
    subgraph Stakeholder_Connections
        E21_influence("influence_level");
        G6 --> E21_influence; E21 --- E21_influence;
    end
    
    %% --- 5. APPLYING ATTRIBUTE STYLES (must be last) ---
    class E0_budget,E0_end,E1_size,E22_avg_sp,E2_status,E4_certified,E3_priority_G0,E3_priority_C6,E26_created,E17_sp,E17_ac,E17_priority,E18_effort,E18_status,E20_severity,E20_status,E9_status,E15_achieved,E14_effort,E21_influence attribute;