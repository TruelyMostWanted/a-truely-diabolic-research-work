%% Mermaid.js Graph for Scrum Optimization Model
graph TD

    %% 1. Style Definitions for Node Colors
    classDef entity fill:#cde,stroke:#369,stroke-width:2px;
    classDef attribute fill:#fff,stroke:#333,stroke-width:1px;
    classDef relation fill:#ffd8b1,stroke:#e67e22,stroke-width:2px;
    classDef goal fill:#d5f5e3,stroke:#27ae60,stroke-width:2px;
    classDef condition fill:#fadbd8,stroke:#c0392b,stroke-width:2px;
    classDef dv fill:#e8daef,stroke:#8e44ad,stroke-width:2px;

    %% 2. Node Declarations
    
    %% Entities (Blue)
    subgraph Entities
        E0(Project); E1(Team); E2(Worker); E3(Feature); E4(Skill); E5(Role); E6(ProductOwner); E7(ScrumMaster); E8(ProductBacklog); E9(Sprint); E12(SprintReview); E13(SprintRetrospective); E14(SprintBacklog); E15(SprintGoal); E16(Epic); E17(UserStory); E18(Task); E19(DevelopmentSnapshot); E20(Blocker); E21(Stakeholder); E22(Velocity); E23(ReleasePlan); E24(Roadmap); E25(ScrumBoard); E26(FeatureDocumentation);
    end
    class E0,E1,E2,E3,E4,E5,E6,E7,E8,E9,E12,E13,E14,E15,E16,E17,E18,E19,E20,E21,E22,E23,E24,E25,E26 entity;

    %% Attributes (White) - Declared within subgraphs for clarity
    subgraph "Project (E0) Attributes"
        direction LR
        E0_attr_budget(budget);
        E0_attr_end(project_end);
    end
    subgraph "Team (E1) Attributes"
        direction LR
        E1_attr_size(team_size);
        E1_attr_status(team_status);
    end
    subgraph "Worker (E2) Attributes"
        direction LR
        E2_attr_status(status);
        E2_attr_avail(availability);
    end
    subgraph "Feature (E3) Attributes"
        direction LR
        E3_attr_priority(priority);
    end
     subgraph "Skill (E4) Attributes"
        direction LR
        E4_attr_certified(certified);
    end
    subgraph "PO (E6) & SM (E7) Attributes"
        direction LR
        E6_attr_id(id);
        E7_attr_id(id);
    end
    subgraph "UserStory (E17) Attributes"
        direction LR
        E17_attr_sp(story_points);
        E17_attr_priority(priority);
    end
    subgraph "Task (E18) Attributes"
        direction LR
        E18_attr_effort(effort);
        E18_attr_type(type);
    end
    subgraph "Blocker (E20) Attributes"
        direction LR
        E20_attr_severity(severity);
        E20_attr_status(status);
    end
    subgraph "Stakeholder (E21) Attributes"
        direction LR
        E21_attr_influence(influence_level);
    end
    subgraph "Velocity (E22) Attributes"
        direction LR
        E22_attr_avg(avg._story_points);
    end
    class E0_attr_budget,E0_attr_end,E1_attr_size,E1_attr_status,E2_attr_status,E2_attr_avail,E3_attr_priority,E4_attr_certified,E6_attr_id,E7_attr_id,E17_attr_sp,E17_attr_priority,E18_attr_effort,E18_attr_type,E20_attr_severity,E20_attr_status,E21_attr_influence,E22_attr_avg attribute;

    %% Relationships (Orange)
    subgraph Relationships
        R1(is_assigned_to_project); R2(belongs_to_team); R3(has_skill); R4(takes_on_role); R5(manages_backlog); R6(is_supported_by); R7(contains_feature); R8(contains_epic); R9(contains_user_story); R10(consists_of_tasks); R11(is_in_sprint_backlog); R12(belongs_to_sprint); R13(pursues_goal); R14(contains_tasks); R15(documents_feature); R16(is_blocked_by); R17(participates_in); R18(moderates_retrospective); R19(refers_to_team); R20(plans_release); R21(is_part_of_roadmap); R22(generates_snapshot);
    end
    class R1,R2,R3,R4,R5,R6,R7,R8,R9,R10,R11,R12,R13,R14,R15,R16,R17,R18,R19,R20,R21,R22 relation;
    
    %% Goals (Green)
    subgraph Goals
        G0(maximize_total_story_points); G2(maximize_priority_of_features); G3(minimize_total_task_effort); G4(maximize_team_velocity); G6(maximize_stakeholder_influence_match); G7(minimize_blocker_severity_sum);
    end
    class G0,G2,G3,G4,G6,G7 goal;

    %% Conditions (Red)
    subgraph Conditions
        C0(enforce_project_budget_limit); C1(enforce_scrum_team_size); C2(assign_only_active_workers); C3(require_feature_priority); C4(must_have_product_owner); C5(require_story_point_estimation); C6(worker_availability_is_positive); C9(use_only_active_teams); C10(prefer_certified_skills); C12(cannot_resolve_blocked_task);
    end
    class C0,C1,C2,C3,C4,C5,C6,C9,C10,C12 condition;

    %% Decision Variables (Purple)
    subgraph Decision_Variables
        DV0(assign_worker_to_team); DV1(assign_story_to_sprint); DV2(select_team_size); DV4(allocate_feature_budget); DV6(assign_task_to_worker); DV8(include_feature_in_release);
    end
    class DV0,DV1,DV2,DV4,DV6,DV8 dv;

    %% 3. Connections
    
    %% Entity --> Attribute Connections
    E0 --- E0_attr_budget; E0 --- E0_attr_end;
    E1 --- E1_attr_size; E1 --- E1_attr_status;
    E2 --- E2_attr_status; E2 --- E2_attr_avail;
    E3 --- E3_attr_priority;
    E4 --- E4_attr_certified;
    E6 --- E6_attr_id;
    E7 --- E7_attr_id;
    E17 --- E17_attr_sp; E17 --- E17_attr_priority;
    E18 --- E18_attr_effort; E18 --- E18_attr_type;
    E20 --- E20_attr_severity; E20 --- E20_attr_status;
    E21 --- E21_attr_influence;
    E22 --- E22_attr_avg;

    %% Entity --> Relation --> Entity Connections (with Cardinality)
    E1 -- "1" --> R1 -- "N" --> E0;
    E2 -- "N" --> R2 -- "1" --> E1;
    E2 -- "N" --> R3 -- "M" --> E4;
    E2 -- "N" --> R4 -- "M" --> E5;
    E6 -- "1" --> R5 -- "1" --> E8;
    E1 -- "1" --> R6 -- "1" --> E7;
    E8 -- "1" --> R7 -- "N" --> E3;
    E8 -- "1" --> R8 -- "N" --> E16;
    E16 -- "1" --> R9 -- "N" --> E17;
    E17 -- "1" --> R10 -- "N" --> E18;
    E17 -- "N" --> R11 -- "M" --> E14;
    E14 -- "1" --> R12 -- "1" --> E9;
    E9 -- "1" --> R13 -- "1" --> E15;
    E25 -- "1" --> R14 -- "N" --> E18;
    E26 -- "1" --> R15 -- "1" --> E3;
    E18 -- "N" --> R16 -- "M" --> E20;
    E21 -- "N" --> R17 -- "M" --> E12;
    E7 -- "1" --> R18 -- "N" --> E13;
    E22 -- "1" --> R19 -- "1" --> E1;
    E23 -- "1" --> R20 -- "N" --> E3;
    E23 -- "N" --> R21 -- "1" --> E24;
    E9 -- "1" --> R22 -- "1" --> E19;
    
    %% Goal --> Entity/Attribute Connections
    G0 --> E17_attr_sp;
    G2 --> E3_attr_priority;
    G3 --> E18_attr_effort;
    G4 --> E22_attr_avg;
    G6 --> E21_attr_influence;
    G7 --> E20_attr_severity;
    
    %% Condition --> Entity/Attribute Connections
    C0 --> E0_attr_budget;
    C1 --> E1_attr_size;
    C2 --> E2_attr_status;
    C3 --> E3_attr_priority;
    C4 --> E6_attr_id;
    C5 --> E17_attr_sp;
    C6 --> E2_attr_avail;
    C9 --> E1_attr_status;
    C10 --> E4_attr_certified;
    C12 --> E20_attr_status;
    C12 --> E18; % A blocked task (E18) cannot be resolved
    
    %% Decision Variable --> Entity Connections
    DV0 --> E2; DV0 --> E1;
    DV1 --> E17; DV1 --> E9;
    DV2 --> E1;
    DV4 --> E3;
    DV6 --> E18; DV6 --> E2;
    DV8 --> E3; DV8 --> E23;