graph TD
    %% ===================================================
    %% 1. Style Definitions
    %% ===================================================
    classDef entity fill:#cce5ff,stroke:#66aaff,stroke-width:2px,color:#000;
    classDef attribute fill:#f8f9fa,stroke:#343a40,stroke-width:1px,color:#000;
    classDef relation fill:#fff3cd,stroke:#ffc107,stroke-width:2px,color:#000;
    classDef goal fill:#d4edda,stroke:#28a745,stroke-width:2px,color:#000;
    classDef condition fill:#f8d7da,stroke:#dc3545,stroke-width:2px,color:#000;
    classDef dv fill:#e2d9f3,stroke:#6f42c1,stroke-width:2px,color:#000;

    %% ===================================================
    %% 2. Node Declarations
    %% ===================================================

    subgraph "Core Entities & Attributes"
        %% Entities
        E0[Project]; E1[Team]; E2[Worker]; E3[Feature]; E4[Skill]; E5[Role]; E8[ProductBacklog]; E9[Sprint]; E14[SprintBacklog]; E16[Epic]; E17[UserStory]; E18[Task]; E20[Blocker]; E21[Stakeholder]; E22[Velocity];

        %% Attributes for Project (E0)
        E0_id[id]; E0_name[name]; E0_budget[budget]; E0_status[status]; E0_priority[priority]; E0_end[project_end];

        %% Attributes for Team (E1)
        E1_id[id]; E1_name[name]; E1_size[team_size]; E1_status[team_status];

        %% Attributes for Worker (E2)
        E2_id[id]; E2_name[name]; E2_avail[availability];

        %% Attributes for Feature (E3)
        E3_id[id]; E3_title[title]; E3_priority[priority];

        %% Attributes for Skill (E4)
        E4_id[id]; E4_level[level];

        %% Attributes for Sprint (E9)
        E9_id[id]; E9_status[status]; E9_goal_achieve[achievement_of_goal]; E9_end[end_date];

        %% Attributes for SprintBacklog (E14)
        E14_id[id]; E14_effort[total_effort];

        %% Attributes for UserStory (E17)
        E17_id[id]; E17_title[title]; E17_points[story_points];

        %% Attributes for Task (E18)
        E18_id[id]; E18_effort[effort]; E18_status[status];

        %% Attributes for Blocker (E20)
        E20_id[id]; E20_status[status];

        %% Attributes for Velocity (E22)
        E22_id[id]; E22_avg[avg._story_points];
    end

    subgraph "Supporting Entities"
        E6[ProductOwner]; E7[ScrumMaster]; E15[SprintGoal]; E19[DevelopmentSnapshot]; E23[ReleasePlan]; E26[FeatureDocumentation];
    end

    subgraph "Goals (Green)"
        G0[maximize_story_points_per_sprint];
        G1[minimize_project_budget_overrun];
        G2[maximize_feature_priority_value];
        G3[minimize_task_effort];
        G4[maximize_team_velocity];
        G5[minimize_active_blockers];
        G6[maximize_sprint_goal_achievement];
        G7[minimize_project_completion_time];
    end

    subgraph "Conditions (Red)"
        C0[project_budget_limit];
        C1[team_size_constraint];
        C2[worker_skill_requirement];
        C4[worker_availability_limit];
        C6[sprint_backlog_effort_cap];
        C7[task_dependency_precedence];
        C10[user_story_points_required];
    end

    subgraph "Decision Variables (Purple)"
        DV0[assign_story_to_sprint];
        DV1[assign_worker_to_task];
        DV2[assign_team_to_project];
        DV3[set_feature_priority];
        DV5[include_feature_in_release];
        DV8[set_team_size];
    end

    %% ===================================================
    %% 3. Entity to Attribute Connections
    %% ===================================================
    E0 --- E0_id; E0 --- E0_name; E0 --- E0_budget; E0 --- E0_status; E0 --- E0_priority; E0 --- E0_end;
    E1 --- E1_id; E1 --- E1_name; E1 --- E1_size; E1 --- E1_status;
    E2 --- E2_id; E2 --- E2_name; E2 --- E2_avail;
    E3 --- E3_id; E3 --- E3_title; E3 --- E3_priority;
    E4 --- E4_id; E4 --- E4_level;
    E9 --- E9_id; E9 --- E9_status; E9 --- E9_goal_achieve; E9 --- E9_end;
    E14 --- E14_id; E14 --- E14_effort;
    E17 --- E17_id; E17 --- E17_title; E17 --- E17_points;
    E18 --- E18_id; E18 --- E18_effort; E18 --- E18_status;
    E20 --- E20_id; E20 --- E20_status;
    E22 --- E22_id; E22 --- E22_avg;


    %% ===================================================
    %% 4. Entity to Entity Connections (via Relations)
    %% ===================================================
    R1[is_assigned_to_project]; E1 -- "1" --> R1 -- "N" --> E0;
    R2[belongs_to_team]; E2 -- "N" --> R2 -- "1" --> E1;
    R3[has_skill]; E2 -- "N" --> R3 -- "M" --> E4;
    R5[manages_backlog]; E6 -- "1" --> R5 -- "1" --> E8;
    R7[contains_feature]; E8 -- "1" --> R7 -- "N" --> E3;
    R8[contains_epic]; E8 -- "1" --> R8 -- "N" --> E16;
    R9[contains_user_story]; E16 -- "1" --> R9 -- "N" --> E17;
    R10[consists_of_tasks]; E17 -- "1" --> R10 -- "N" --> E18;
    R11[is_in_sprint_backlog]; E17 -- "N" --> R11 -- "M" --> E14;
    R12[belongs_to_sprint]; E14 -- "1" --> R12 -- "1" --> E9;
    R13[pursues_goal]; E9 -- "1" --> R13 -- "1" --> E15;
    R16[is_blocked_by]; E18 -- "N" --> R16 -- "M" --> E20;
    R19[refers_to_team]; E22 -- "1" --> R19 -- "1" --> E1;
    R20[plans_release]; E23 -- "1" --> R20 -- "N" --> E3;
    R22[generates_snapshot]; E9 -- "1" --> R22 -- "1" --> E19;

    %% ===================================================
    %% 5. Goals to Entity/Attribute Connections
    %% ===================================================
    G0 --> E17_points;
    G1 --> E0_budget;
    G2 --> E3_priority;
    G3 --> E18_effort;
    G4 --> E22_avg;
    G5 --> E20_status;
    G6 --> E9_goal_achieve;
    G7 --> E0_end;

    %% ===================================================
    %% 6. Conditions to Entity/Attribute Connections
    %% ===================================================
    C0 --> E0_budget;
    C1 --> E1_size;
    C2 --> E4_level;
    C4 --> E2_avail;
    C6 --> E14_effort;
    C7 --> E18_status;
    C10 --> E17_points;

    %% ===================================================
    %% 7. Decision Variables to Entity Connections
    %% ===================================================
    DV0 --> E17; DV0 --> E9;
    DV1 --> E2; DV1 --> E18;
    DV2 --> E1; DV2 --> E0;
    DV3 --> E3;
    DV5 --> E3; DV5 --> E23;
    DV8 --> E1;

    %% ===================================================
    %% 8. Apply Class Styles to Nodes
    %% ===================================================
    class E0,E1,E2,E3,E4,E5,E6,E7,E8,E9,E14,E15,E16,E17,E18,E19,E20,E21,E22,E23,E26 entity;
    class E0_id,E0_name,E0_budget,E0_status,E0_priority,E0_end,E1_id,E1_name,E1_size,E1_status,E2_id,E2_name,E2_avail,E3_id,E3_title,E3_priority,E4_id,E4_level,E9_id,E9_status,E9_goal_achieve,E9_end,E14_id,E14_effort,E17_id,E17_title,E17_points,E18_id,E18_effort,E18_status,E20_id,E20_status,E22_id,E22_avg attribute;
    class R1,R2,R3,R5,R7,R8,R9,R10,R11,R12,R13,R16,R19,R20,R22 relation;
    class G0,G1,G2,G3,G4,G5,G6,G7 goal;
    class C0,C1,C2,C4,C6,C7,C10 condition;
    class DV0,DV1,DV2,DV3,DV5,DV8 dv;