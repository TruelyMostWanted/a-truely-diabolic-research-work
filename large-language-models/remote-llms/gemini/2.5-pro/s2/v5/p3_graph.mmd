graph TD

    %% -------------------------------------------
    %% --- 1. STYLE DEFINITIONS
    %% -------------------------------------------
    classDef entity fill:#D3E5FF,stroke:#0B57D0,stroke-width:2px,color:#000;
    classDef attribute fill:#FFFFFF,stroke:#333,stroke-width:1px,color:#000;
    classDef relation fill:#FFEFC1,stroke:#E67C00,stroke-width:2px,color:#000;
    classDef goal fill:#D7F6DD,stroke:#137333,stroke-width:2px,color:#000;
    classDef condition fill:#FADAD4,stroke:#D93025,stroke-width:2px,color:#000;
    classDef dv fill:#E8DFF5,stroke:#7922CC,stroke-width:2px,color:#000;


    %% -------------------------------------------
    %% --- 2. NODES DECLARATION
    %% -------------------------------------------

    %% --- Entities ---
    subgraph "Core Entities"
        E0[Project]; E1[Team]; E2[Worker]; E21[Stakeholder]; E6[ProductOwner]; E7[ScrumMaster];
    end
    
    subgraph "Planning & Strategy"
        E24[Roadmap]; E23[ReleasePlan]; E8[ProductBacklog]; E22[Velocity];
    end

    subgraph "Backlog Hierarchy"
        E3[Feature]; E16[Epic]; E17[UserStory]; E18[Task]; E20[Blocker];
    end
    
    subgraph "Sprint Cycle & Artifacts"
        E9[Sprint]; E10[SprintPlanning]; E11[DailyScrum]; E12[SprintReview]; E13[SprintRetrospective];
        E15[SprintGoal]; E14[SprintBacklog]; E25[ScrumBoard]; E19[DevelopmentSnapshot];
    end
    
    subgraph "Supporting Entities"
        E4[Skill]; E5[Role]; E26[FeatureDocumentation];
    end

    %% --- Goals ---
    subgraph "Optimization Goals"
        G0{{G0: maximize_team_velocity}}; G1{{G1: minimize_project_budget}}; G2{{G2: maximize_feature_priority_sum}};
        G3{{G3: minimize_total_task_effort}}; G4{{G4: maximize_sprint_goal_achievement}}; G5{{G5: minimize_blocker_count}};
        G6{{G6: maximize_story_points_in_sprint}}; G7{{G7: maximize_team_satisfaction}}; G8{{G8: minimize_project_end_date}};
        G9{{G9: maximize_stakeholder_engagement}}; G10{{G10: minimize_blocker_severity_sum}}; G11{{G11: maximize_sprint_review_attendance}};
        G12{{G12: maximize_certified_skills}};
    end

    %% --- Conditions ---
    subgraph "Constraints & Conditions"
        C0>C0: enforce_max_team_size]; C1>C1: enforce_min_team_size]; C2>C2: enforce_project_budget];
        C3>C3: require_active_worker_status]; C4>C4: respect_sprint_backlog_capacity]; C5>C5: require_high_feature_priority];
        C6>C6: require_user_story_acceptance_criteria]; C10>C10: prefer_experienced_scrum_master]; C12>C12: prevent_work_on_closed_projects];
    end

    %% --- Decision Variables ---
    subgraph "Decision Variables"
        DV0[/DV0: assign_worker_to_task/]; DV1[/DV1: assign_story_to_sprint/]; DV2[/DV2: assign_team_to_project/];
        DV3[/DV3: select_feature_for_release/]; DV4[/DV4: set_sprint_backlog_effort/]; DV5[/DV5: set_team_size/];
        DV9[/DV9: assign_worker_to_team/];
    end

    %% --- Relationships ---
    R1(is_assigned_to_project); R2(belongs_to_team); R3(has_skill); R4(takes_on_role);
    R5(manages_backlog); R6(is_supported_by); R7(contains_feature); R8(contains_epic);
    R9(contains_user_story); R10(consists_of_tasks); R11(is_in_sprint_backlog); R12(belongs_to_sprint);
    R13(pursues_goal); R14(contains_tasks); R15(documents_feature); R16(is_blocked_by);
    R17(participates_in); R19(refers_to_team); R20(plans_release); R21(is_part_of_roadmap);
    R22(generates_snapshot);


    %% -------------------------------------------
    %% --- 3. CONNECTIONS
    %% -------------------------------------------

    %% --- Entity -> Relationship -> Entity ---
    E1 -- "1" --> R1 -- "N" --> E0;
    E2 -- "N" --> R2 -- "1" --> E1;
    E2 -- "N" --> R3 -- "M" --> E4;
    E2 -- "N" --> R4 -- "M" --> E5;
    E6 -- "1" --> R5 -- "1" --> E8;
    E1 -- "1" --> R6 -- "1" --> E7;
    E8 -- "1" --> R7 -- "N" --> E3;
    E8 -- "1" --> R8 -- "N" --> E16;
    E16 -- "1" --> R9 -- "N" --> E17;
    E17 -- "1" --> R10 -- "N" --> E18;
    E17 -- "N" --> R11 -- "M" --> E14;
    E14 -- "1" --> R12 -- "1" --> E9;
    E9 -- "1" --> R13 -- "1" --> E15;
    E25 -- "1" --> R14 -- "N" --> E18;
    E26 -- "1" --> R15 -- "1" --> E3;
    E18 -- "N" --> R16 -- "M" --> E20;
    E21 -- "N" --> R17 -- "M" --> E12;
    E22 -- "1" --> R19 -- "1" --> E1;
    E23 -- "1" --> R20 -- "N" --> E3;
    E23 -- "N" --> R21 -- "1" --> E24;
    E9 -- "1" --> R22 -- "1" --> E19;

    %% --- Entity -> Attribute Connections (Selected for clarity) ---
    A_proj_budget(budget) --- E0;
    A_proj_end(project_end) --- E0;
    A_proj_status(status) --- E0;
    A_team_size(team_size) --- E1;
    A_worker_status(status) --- E2;
    A_feature_prio(priority) --- E3;
    A_skill_cert(certified) --- E4;
    A_sm_exp(experience) --- E7;
    A_sprintgoal_achieved(achievement_status) --- E15;
    A_us_storypoints(story_points) --- E17;
    A_us_accept(acceptance_criteria) --- E17;
    A_task_effort(effort) --- E18;
    A_blocker_sev(severity) --- E20;
    A_stake_influence(influence_level) --- E21;
    A_velo_avg(avg._story_points) --- E22;
    A_sbl_effort(total_effort) --- E14;
    A_sprint_review_attendees(attendees_count) --- E12;
    A_sprint_retro_satisfaction(team_satisfaction) --- E13;
    
    %% --- Goals -> Entity/Attribute Connections ---
    G0 -- "targets" --> A_velo_avg;
    G1 -- "targets" --> A_proj_budget;
    G2 -- "targets" --> A_feature_prio;
    G3 -- "targets" --> A_task_effort;
    G4 -- "targets" --> A_sprintgoal_achieved;
    G5 -- "targets" --> E20;
    G6 -- "targets" --> A_us_storypoints;
    G7 -- "targets" --> A_sprint_retro_satisfaction;
    G8 -- "targets" --> A_proj_end;
    G9 -- "targets" --> A_stake_influence;
    G10 -- "targets" --> A_blocker_sev;
    G11 -- "targets" --> A_sprint_review_attendees;
    G12 -- "targets" --> A_skill_cert;
    
    %% --- Conditions -> Entity/Attribute Connections ---
    C0 -- "constrains" --> A_team_size;
    C1 -- "constrains" --> A_team_size;
    C2 -- "constrains" --> A_proj_budget;
    C3 -- "constrains" --> A_worker_status;
    C4 -- "constrains" --> A_sbl_effort;
    C5 -- "constrains" --> A_feature_prio;
    C6 -- "constrains" --> A_us_accept;
    C10 -- "constrains" --> A_sm_exp;
    C12 -- "constrains" --> A_proj_status;

    %% --- Decision Variables -> Entity Connections ---
    DV0 -- "manipulates" --> E2;
    DV0 -- "manipulates" --> E18;
    DV1 -- "manipulates" --> E17;
    DV1 -- "manipulates" --> E9;
    DV2 -- "manipulates" --> E1;
    DV2 -- "manipulates" --> E0;
    DV3 -- "manipulates" --> E3;
    DV3 -- "manipulates" --> E23;
    DV4 -- "manipulates" --> E14;
    DV5 -- "manipulates" --> E1;
    DV9 -- "manipulates" --> E2;
    DV9 -- "manipulates" --> E1;

    %% -------------------------------------------
    %% --- 4. APPLYING STYLES
    %% -------------------------------------------
    class E0,E1,E2,E3,E4,E5,E6,E7,E8,E9,E10,E11,E12,E13,E14,E15,E16,E17,E18,E19,E20,E21,E22,E23,E24,E25,E26 entity;
    class G0,G1,G2,G3,G4,G5,G6,G7,G8,G9,G10,G11,G12 goal;
    class C0,C1,C2,C3,C4,C5,C6,C10,C12 condition;
    class DV0,DV1,DV2,DV3,DV4,DV5,DV9 dv;
    class R1,R2,R3,R4,R5,R6,R7,R8,R9,R10,R11,R12,R13,R14,R15,R16,R17,R19,R20,R21,R22 relation;
    class A_proj_budget,A_proj_end,A_proj_status,A_team_size,A_worker_status,A_feature_prio,A_skill_cert,A_sm_exp,A_sprintgoal_achieved,A_us_storypoints,A_us_accept,A_task_effort,A_blocker_sev,A_stake_influence,A_velo_avg,A_sbl_effort,A_sprint_review_attendees,A_sprint_retro_satisfaction attribute;